<script type="text/JavaScript">
    var boxxy = boxxy.initialize();

    function teamLi(team) {
        return '<li data-team="' + team.id + '">' +
            '<span class="name">' + team.name + '</span>' +
            '<span class="laps">' + team.laps + '</span>' +
            '</li>'
    }

    boxxy.onUpdate = function() {
        var byScore = boxxy.teamsByScore();
        $('#scores').empty();
        var ol = $(document.createElement('ol'));
        for(var i in byScore) ol.append(teamLi(byScore[i]));
        $('#scores').append(ol);
    }

    boxxy.onPutState = function(newState) {
        /* Called when everything is (re)set */
    }

    boxxy.onAddLap = function(lap) {
        var li = $('[data-team="' + lap.team.id + '"]');
        var up = $(document.createElement('strong')).text(' +1!');
        li.append(up);
        up.fadeOut(5000);
    }

    boxxy.listen('http://localhost:8080');
</script>
<div id="scores"><p>De scores worden geladen...</p></div>
